(this["webpackJsonpprueba-lolamarket"]=this["webpackJsonpprueba-lolamarket"]||[]).push([[0],{120:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a(11),i=(a(33),a(120),a(179)),o=a(180),s=a(96),d=a(37),l=a(16),j=a(104),u=a(207),b=Object(j.a)({}),p=Object(u.a)(b),h=a(69),O=a(25),x=a.n(O),g=a(46),m=a(36),v=a(102),f=a.n(v),k=a(103),y=a.n(k),S=f.a.create({baseURL:"https://api.comprea.com/v7",paramsSerializer:function(e){return y.a.stringify(e,{arrayFormat:"comma"})}}),w=function(e,t){return S.get(e,{params:t}).then((function(e){return e.data}))},C=Object(h.b)({name:"app",initialState:{data:{isSideBarOpen:!1,isDialogOpen:{show:!1,dialogMsg:""}},asyncLoading:!1,asyncError:""},reducers:{asyncStart:function(e){return Object(m.a)(Object(m.a)({},e),{},{asyncLoading:!0})},asyncSuccess:function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{asyncLoading:!1,data:Object(m.a)(Object(m.a)({},e.data),a)})},asyncError:function(e,t){var a=t.payload;return Object(m.a)(Object(m.a)({},e),{},{asyncLoading:!1,asyncError:a})}}}),L=C.actions,D=L.asyncStart,I=L.asyncSuccess,E=L.asyncError,M=C.reducer,P=function(e){return e.appStore},B=function(){return function(){var e=Object(g.a)(x.a.mark((function e(t,a){var n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D()),n=a(),e.prev=2,e.next=5,w("/user/postalcode",{token:n.appStore.data.token,postalcode:n.appStore.data.postalCode});case 5:if("OK"!==(c=e.sent).status){e.next=10;break}return e.abrupt("return",t(I({markets:c})));case 10:throw c.error.message;case 11:e.next=19;break;case 13:e.prev=13,e.t0=e.catch(2),t(E(e.t0)),t(A({isDialogOpen:{show:!0,dialogMsg:e.t0}})),t(A({postalCode:""})),t(A({marketSelected:""}));case 19:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(g.a)(x.a.mark((function t(a,n){var c,r,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(D()),c=n(),t.prev=2,t.next=5,w("/company/items",{token:c.appStore.data.token,company_id:null===(r=c.appStore.data.marketSelected)||void 0===r?void 0:r.id,category_id:e});case 5:if("OK"!==(i=t.sent).status){t.next=10;break}return t.abrupt("return",a(I({products:i})));case 10:throw i.error.message;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),a(E(t.t0)),a(A({isDialogOpen:{show:!0,dialogMsg:t.t0}}));case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(e,a){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(g.a)(x.a.mark((function t(a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a(I(e))}catch(n){a(E(n))}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=Object(h.a)({reducer:{appStore:M}}),K=function(e){var t=e.children;return Object(n.jsx)(s.a,{theme:p,children:Object(n.jsxs)(i.a,{theme:p,children:[Object(n.jsx)(o.a,{}),Object(n.jsx)(l.a,{store:F,children:Object(n.jsx)(d.a,{children:t})})]})})},R=a(18),_=a(10),q=a(183),z=a(184),H=a(185),N=a(51),U=a(205),V={home:"/",marketList:"/tienda",marketId:"/tienda/:id",productList:"/tienda/:id/:categoryId/:subcategoryId",categoryProductList:"/tienda/:id/:categoryId/"},J=a(13),G=_.a.div({margin:15,padding:7,border:"solid 3px #3f51b5",display:"flex",width:"fit-content",borderRadius:7,boxShadow:"0 0 450px #f50057"}),Q=Object(_.a)(q.a)({height:48}),W=Object(_.a)(z.a)({height:"calc(100vh - 86px)"}),X=Object(_.a)(H.a)({width:"100%",backgroundSize:"contain"}),Y=function(){var e=Object(J.g)(),t=Object(l.b)(),a=Object(c.useState)(""),r=Object(R.a)(a,2),i=r[0],o=r[1];return Object(c.useEffect)((function(){t(function(){var e=Object(g.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D()),e.prev=1,e.next=4,w("/user/session");case 4:if("OK"!==(a=e.sent).status){e.next=9;break}return e.abrupt("return",t(I({token:a.token})));case 9:throw a.error.message;case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),t(E(e.t0)),t(A({isDialogOpen:{show:!0,dialogMsg:e.t0}}));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(n.jsxs)(W,{container:!0,justify:"center",children:[Object(n.jsxs)(z.a,{container:!0,direction:"column",justify:"center",alignItems:"center",item:!0,sm:6,xs:12,children:[Object(n.jsx)(N.a,{variant:"h2",children:"\xa1Qu\xe9date en casa!"}),Object(n.jsx)(N.a,{variant:"h2",children:"Nosotros te"}),Object(n.jsx)(N.a,{variant:"h2",children:"hacemos la compra"}),Object(n.jsxs)(G,{children:[Object(n.jsx)(U.a,{id:"outlined-basic",label:"C\xf3digo postal",required:!0,inputProps:{minLength:5,maxLength:5},onChange:function(e){return o(e.target.value)}}),Object(n.jsx)(Q,{variant:"contained",color:"secondary",disabled:5!==i.length,onClick:function(){t(A({postalCode:i})),t(B()),e.push(V.marketList)},children:"\xa1HACER LA COMPRA!"})]})]}),Object(n.jsx)(z.a,{container:!0,item:!0,sm:6,xs:12,children:Object(n.jsx)(X,{className:"Comprar",image:window.window.screen.width<450?"/shop-mobile.png":"/shop-desktop.png",title:"shopping"})})]})},Z=a(188),$=a(189),ee=a(190),te=_.a.div({display:"flex",alignItems:"center",justifyContent:"center",padding:18}),ae=Object(_.a)(Z.a)({width:"100%",minHeight:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center"}),ne=Object(_.a)(z.a)({"&:hover":{boxShadow:"0 1px 8px #b5b5b5"},"&:active":{boxShadow:"inset 0 0 12px #b5b5b5"}}),ce=_.a.div({padding:"25px 50px"}),re=Object(_.a)(z.a)({height:"80vh"}),ie=function(){var e,t,a=Object(l.b)(),c=Object(J.g)(),r=Object(l.c)(P).data,i=function(e,t){a(A({marketSelected:t})),a(function(){var e=Object(g.a)(x.a.mark((function e(t,a){var n,c,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D()),n=a(),e.prev=2,e.next=5,w("/company/categories",{token:n.appStore.data.token,company_id:null===(c=n.appStore.data.marketSelected)||void 0===c?void 0:c.id});case 5:if("OK"!==(r=e.sent).status){e.next=10;break}return e.abrupt("return",t(I({marketCategories:r})));case 10:throw r.error.message;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),t(E(e.t0)),t(A({isDialogOpen:{show:!0,dialogMsg:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}()),c.push("/tienda/".concat(t.shortcut));var n=document.getElementsByClassName("MuiCard-root");Array.from(n).forEach((function(e){return e.style.boxShadow="none"})),e.currentTarget.style.boxShadow="0 0 0 2px rgb(".concat("255,255,255"!==t.color?t.color:"61,86,186",")")};return"OK"===(null===(e=r.markets)||void 0===e?void 0:e.status)?Object(n.jsxs)(ce,{children:[Object(n.jsx)(N.a,{variant:"h4",align:"center",paragraph:!0,children:"\xbfD\xf3nde quieres comprar?"}),Object(n.jsx)(z.a,{container:!0,spacing:3,children:null===(t=r.markets)||void 0===t?void 0:t.services.map((function(e){return e.markets.map((function(t){return Object(n.jsx)(ne,{container:!0,item:!0,lg:2,md:3,sm:6,xs:12,children:Object(n.jsxs)(ae,{onClick:function(e){i(e,t)},children:[Object(n.jsx)(te,{children:Object(n.jsx)("img",{alt:t.name,src:t.logotype})}),Object(n.jsx)($.a,{children:Object(n.jsx)(N.a,{color:"textSecondary",children:e.delivery})})]})},t.id)}))}))})]}):Object(n.jsx)(re,{container:!0,justify:"center",alignContent:"center",children:Object(n.jsxs)(N.a,{align:"center",variant:"h4",children:[Object(n.jsx)(ee.a,{color:"secondary"}),"Cargando..."]})})},oe=a(209),se=a(191),de=_.a.div({padding:"50px"}),le=Object(_.a)(z.a)({padding:"50px 0 30px"}),je=Object(_.a)(N.a)({width:"95%",borderBottom:"1px solid #6ad76e"}),ue=Object(_.a)(z.a)({padding:"0 50px"}),be=Object(_.a)(Z.a)({width:"100%",padding:15}),pe=Object(_.a)(H.a)({height:140,backgroundSize:"contain"}),he=Object(_.a)($.a)({paddingTop:30}),Oe=Object(_.a)(z.a)({height:"80vh"}),xe=function(){var e=Object(J.h)(),t=Object(l.b)(),a=function(e,a){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(le,{container:!0,alignItems:"center",children:[Object(n.jsx)(oe.a,{src:e.icon}),Object(n.jsx)(je,{variant:"h6",children:e.name})]}),Object(n.jsx)(ue,{container:!0,spacing:3,children:a.map((function(e){return Object(n.jsx)(z.a,{container:!0,item:!0,lg:2,md:3,sm:6,xs:12,direction:"column",alignItems:"center",children:Object(n.jsx)(be,{onClick:function(){return a=e.description,void t(A({isDialogOpen:{show:!0,dialogMsg:a,dialogTitle:"PRODUCTO"}}));var a},children:Object(n.jsxs)(se.a,{children:[Object(n.jsx)(pe,{title:e.name,image:e.picture}),Object(n.jsxs)(he,{children:[Object(n.jsxs)(N.a,{align:"right",children:[e.price," \u20ac"]}),Object(n.jsx)("div",{children:Object(n.jsx)(N.a,{align:"left",children:e.name})})]})]})})})}))})]})};return e.state?Object(n.jsx)(de,{children:e.state.categories?e.state.categories.map((function(e){return a(e,e.items)})):a(e.state.items[0].category,e.state.items)}):Object(n.jsx)(Oe,{container:!0,justify:"center",alignContent:"center",children:Object(n.jsxs)(N.a,{align:"center",variant:"h4",children:[Object(n.jsx)(ee.a,{color:"secondary"}),"Cargando..."]})})},ge=function(){return Object(n.jsxs)(J.d,{children:[Object(n.jsx)(J.b,{exact:!0,path:V.home,children:Object(n.jsx)(Y,{})}),Object(n.jsx)(J.b,{exact:!0,path:V.marketList,children:Object(n.jsx)(ie,{})}),Object(n.jsx)(J.b,{exact:!0,path:V.marketId,children:Object(n.jsx)(ie,{})}),Object(n.jsx)(J.b,{exact:!0,path:V.productList,children:Object(n.jsx)(xe,{})}),Object(n.jsx)(J.b,{exact:!0,path:V.categoryProductList,children:Object(n.jsx)(xe,{})}),Object(n.jsx)(J.a,{to:V.home})]})},me=a(192),ve=a(193),fe=a(208),ke=a(186),ye=Object(_.a)(me.a)({display:"flex",justifyContent:"space-between"}),Se=Object(_.a)(oe.a)({height:35,width:35}),we=function(){var e,t,a,c,r=Object(l.b)(),i=Object(l.c)(P).data,o=function(){var e;return"255,255,255"!==(null===(e=i.marketSelected)||void 0===e?void 0:e.color)?{color:"white"}:{color:"black"}};return Object(n.jsx)(ve.a,{position:"sticky",style:{background:"rgb(".concat(null===(e=i.marketSelected)||void 0===e?void 0:e.color,")")},children:Object(n.jsxs)(ye,{color:"inherit",children:[Object(n.jsx)("div",{children:i.marketSelected&&Object(n.jsx)(q.a,{variant:"contained",startIcon:Object(n.jsx)(Se,{alt:null===(t=i.marketSelected)||void 0===t?void 0:t.name,src:null===(a=i.marketSelected)||void 0===a?void 0:a.icon}),onClick:function(){return r(A({isSideBarOpen:!0}))},children:Object(n.jsx)(N.a,{variant:"h6",children:"CATEGOR\xcdAS"})})}),i.postalCode&&Object(n.jsxs)("div",{children:[Object(n.jsx)(fe.a,{style:o(),htmlFor:"edit-postalCode",children:null===(c=i.markets)||void 0===c?void 0:c.city.toUpperCase()}),Object(n.jsx)(ke.a,{color:"secondary",style:o(),id:"edit-postalCode",defaultValue:i.postalCode,required:!0,inputProps:{minLength:5,maxLength:5},onChange:function(e){return e.target.checkValidity()&&(t=e.target.value,r(A({postalCode:t})),void r(B()));var t}})]})]})})},Ce=a(206),Le=a(187),De=a(194),Ie=a(195),Ee=a(197),Me=a(198),Pe=a(196),Be=a(199),Te=Object(_.a)(Le.a)({background:"#f5f5f5"}),Ae=Object(_.a)(De.a)({"&:hover":{background:"#f5f5f5"},"&:active":{background:"#4fd0531a"}}),Fe=_.a.div({display:"flex",flexDirection:"column",padding:"0 8px 0 4px"}),Ke=Object(_.a)(N.a)({lineHeight:1,paddingLeft:10}),Re=Object(_.a)(oe.a)({height:24,width:24}),_e=Object(_.a)(Ce.a)({width:"21.7%"}),qe=Object(_.a)(Ie.a)({padding:"0 7px"}),ze=function(){var e,t,a,r,i,o,s=Object(J.g)(),d=Object(l.b)(),j=Object(l.c)(P).data,u=Object(c.useState)(!1),b=Object(R.a)(u,2),p=b[0],h=b[1],O=Object(c.useState)(0),m=Object(R.a)(O,2),v=m[0],f=m[1],k=Object(c.useState)(0),y=Object(R.a)(k,2),S=y[0],C=y[1],L=function(e,t,a){var n;t?(console.log(d(T(a))),Promise.resolve(d(T(a))).then((function(a){var n;console.log(a),s.push("/tienda/".concat(null===(n=j.marketSelected)||void 0===n?void 0:n.shortcut,"/").concat(e,"/").concat(t),a.payload.products)}))):Promise.resolve(d((n=v,function(){var e=Object(g.a)(x.a.mark((function e(t,a){var c,r,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(D()),c=a(),e.prev=2,e.next=5,w("/company/featured",{token:c.appStore.data.token,company_id:null===(r=c.appStore.data.marketSelected)||void 0===r?void 0:r.id,category_id:n});case 5:if("OK"!==(i=e.sent).status){e.next=10;break}return e.abrupt("return",t(I({categoryProducts:i})));case 10:throw i.error.message;case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),t(E(e.t0)),t(A({isDialogOpen:{show:!0,dialogMsg:e.t0}}));case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a){return e.apply(this,arguments)}}()))).then((function(t){var a;return s.push("/tienda/".concat(null===(a=j.marketSelected)||void 0===a?void 0:a.shortcut,"/").concat(e),t.payload.categoryProducts)})),d(A({isSideBarOpen:!1}))};return Object(n.jsx)(n.Fragment,{children:"OK"===(null===(e=j.marketCategories)||void 0===e?void 0:e.status)&&Object(n.jsxs)(_e,{open:j.isSideBarOpen,onClose:function(){return d(A({isSideBarOpen:!1}))},children:[Object(n.jsx)(ve.a,{position:"sticky",style:{backgroundColor:"rgb(".concat(null===(t=j.marketSelected)||void 0===t?void 0:t.color,")")},children:Object(n.jsxs)(me.a,{style:function(){var e;return"255,255,255"!==(null===(e=j.marketSelected)||void 0===e?void 0:e.color)?{color:"white"}:{color:"black"}}(),children:[Object(n.jsx)(Re,{alt:null===(a=j.marketSelected)||void 0===a?void 0:a.name,src:null===(r=j.marketSelected)||void 0===r?void 0:r.icon}),Object(n.jsxs)(Fe,{children:[Object(n.jsx)(Ke,{variant:"h6",children:null===(i=j.marketSelected)||void 0===i?void 0:i.name}),Object(n.jsxs)(Ke,{variant:"caption",children:["Comprando en ",j.postalCode]})]}),Object(n.jsx)(q.a,{variant:"contained",onClick:function(){d(A({isSideBarOpen:!1})),s.push(V.marketList)},children:"Cambiar"})]})}),Object(n.jsx)("div",{role:"presentation",children:Object(n.jsx)(Le.a,{children:null===(o=j.marketCategories)||void 0===o?void 0:o.categories.map((function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(Ae,{disableRipple:!0,button:!0,onClick:function(){h(!p),f(v===e.id?0:e.id)},children:[Object(n.jsx)(Re,{alt:e.name,src:e.icon}),Object(n.jsx)(qe,{primary:e.name}),e.id===v&&Object(n.jsx)(Pe.a,{color:"action"})]},e.id),Object(n.jsx)(Ee.a,{variant:"middle"},"divider"+e.id),Object(n.jsx)(Me.a,{in:e.id===v,timeout:"auto",unmountOnExit:!0,children:Object(n.jsxs)(Te,{disablePadding:!0,children:[Object(n.jsxs)(De.a,{button:!0,onClick:function(){L(e.shortcut,"",e.id),C(e.id)},children:[Object(n.jsx)(Ie.a,{primary:"Ver toda la secci\xf3n"}),S===e.id&&Object(n.jsx)(Be.a,{color:"action"})]}),Object(n.jsx)(Ee.a,{variant:"middle"}),e.categories.map((function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(De.a,{button:!0,onClick:function(){L(e.shortcut,t.shortcut,t.id),C(t.id)},children:[Object(n.jsx)(Re,{alt:t.name,src:t.icon}),Object(n.jsx)(qe,{primary:t.name}),t.id===S&&Object(n.jsx)(Be.a,{color:"action"})]},t.id),Object(n.jsx)(Ee.a,{variant:"middle"})]})}))]})},e.id+1e3)]})}))})})]})})},He=a(200),Ne=a(201),Ue=a(202),Ve=a(203),Je=a(204),Ge=function(){var e,t,a=Object(J.g)(),c=Object(l.b)(),r=Object(l.c)(P).data,i=function(){!r.isDialogOpen.dialogTitle&&a.push(V.home),c(A({isDialogOpen:{show:!1,dialogMsg:"",dialogTitle:void 0}}))};return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(He.a,{open:r.isDialogOpen.show,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(n.jsx)(Ne.a,{id:"alert-dialog-title",children:null===r||void 0===r||null===(e=r.isDialogOpen)||void 0===e?void 0:e.dialogTitle}),Object(n.jsx)(Ue.a,{children:Object(n.jsx)(Ve.a,{id:"alert-dialog-description",children:null===r||void 0===r||null===(t=r.isDialogOpen)||void 0===t?void 0:t.dialogMsg})}),Object(n.jsx)(Je.a,{children:Object(n.jsx)(q.a,{onClick:i,color:"primary",children:"Aceptar"})})]})})},Qe=function(){return Object(n.jsxs)(K,{children:[Object(n.jsx)(we,{}),Object(n.jsx)(ze,{}),Object(n.jsx)(Ge,{}),Object(n.jsx)(ge,{})]})},We=document.getElementById("root");Object(r.render)(Object(n.jsx)(Qe,{}),We)}},[[146,1,2]]]);
//# sourceMappingURL=main.e14d617f.chunk.js.map